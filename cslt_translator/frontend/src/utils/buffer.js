// Sliding-window buffer logic and stability check
